<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CCIS-CodeHub UML Diagrams</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }

        .diagram-container {
            background: white;
            padding: 30px;
            margin: 30px 0;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }

        h2 {
            color: #34495e;
            margin-top: 40px;
        }

        .download-btn {
            background: #3498db;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
        }

        .download-btn:hover {
            background: #2980b9;
        }

        .mermaid {
            text-align: center;
            background: white;
        }

        .description {
            color: #7f8c8d;
            font-style: italic;
            margin: 15px 0;
            padding: 15px;
            background: #ecf0f1;
            border-left: 4px solid #3498db;
        }
    </style>
</head>

<body>
    <h1>CCIS-CodeHub - Complete UML Diagram Collection</h1>
    <p>Software Engineering Documentation - Visual Diagrams</p>

    <div class="diagram-container">
        <h2>1. Main Use Case Diagram</h2>
        <p class="description">High-level overview showing the 6 core functional modules: Manage Users, View Dashboard,
            Access Learning System, Collaborate on Projects, Participate in Community, and Interact with AI Mentor.</p>
        <button class="download-btn" onclick="downloadDiagram('usecase-main', 'UseCase-Main')">Download PNG</button>
        <div class="mermaid" id="usecase-main">
            flowchart LR
            %% Actors (Left side)
            Student((Student))
            Instructor((Instructor))
            Admin((Administrator))

            %% System Boundary
            subgraph SystemBoundary["CCIS-CodeHub System"]
            direction TB
            UC1([Manage Users])
            UC2([View Dashboard])
            UC3([Access Learning System])
            UC4([Collaborate on Projects])
            UC5([Participate in Community])
            UC6([Interact with AI Mentor])
            end

            %% Student Associations
            Student -.-> UC2
            Student -.-> UC3
            Student -.-> UC4
            Student -.-> UC5
            Student -.-> UC6

            %% Instructor Associations
            Instructor -.-> UC2
            Instructor -.-> UC3
            Instructor -.-> UC4
            Instructor -.-> UC5
            Instructor -.-> UC6

            %% Admin Associations
            Admin -.-> UC1
            Admin -.-> UC2
            Admin -.-> UC3
            Admin -.-> UC5

            %% Styling
            style SystemBoundary fill:#f0f0ff,stroke:#333,stroke-width:3px
            classDef usecase fill:#e6f3ff,stroke:#333,stroke-width:2px;
            class UC1,UC2,UC3,UC4,UC5,UC6 usecase;
        </div>
    </div>

    <div class="diagram-container">
        <h2>2. User Management Use Case</h2>
        <p class="description">User management functions including account creation, role assignment, and administrative
            features.</p>
        <button class="download-btn" onclick="downloadDiagram('usecase-user-mgmt', 'UseCase-UserManagement')">Download
            PNG</button>
        <div class="mermaid" id="usecase-user-mgmt">
            flowchart TB
            %% Actors
            Admin((Administrator))
            Instructor((Instructor))
            Student((Student))

            %% System Boundary
            subgraph UserMgmt["User Management System"]
            direction TB
            ManageUsers([Manage Users])
            CreateAccount([Create User Account])
            UpdateProfile([Update User Profile])
            AssignRoles([Assign User Roles])
            ResetPassword([Reset Password])
            DeactivateUser([Deactivate User])

            ViewAnalytics([View User Analytics])
            SendNotification([Send Notifications])

            StudentRole([Assign Student Role])
            InstructorRole([Assign Instructor Role])
            AdminRole([Assign Admin Role])

            %% Include: Base -> Included
            ManageUsers -.->|include| CreateAccount
            ManageUsers -.->|include| UpdateProfile
            ManageUsers -.->|include| AssignRoles
            ManageUsers -.->|include| ResetPassword

            %% Extend: Extension -> Base
            ViewAnalytics -.->|extend| ManageUsers
            SendNotification -.->|extend| ManageUsers
            DeactivateUser -.->|extend| ManageUsers

            %% Generalization: Specialization of AssignRoles
            AssignRoles --- StudentRole
            AssignRoles --- InstructorRole
            AssignRoles --- AdminRole
            end

            %% Actor Relationships
            Admin --> ManageUsers
            Admin --> ViewAnalytics
            Admin --> DeactivateUser
            Admin --> SendNotification

            Instructor --> UpdateProfile
            Student --> UpdateProfile
            Student --> ResetPassword
            Instructor --> ResetPassword

            classDef base fill:#ffcccc,stroke:#333,stroke-width:2px;
            classDef extend fill:#ccffcc,stroke:#333,stroke-width:2px;
            classDef default fill:#fff,stroke:#333,stroke-width:2px;

            class ManageUsers base;
            class ViewAnalytics,SendNotification,DeactivateUser extend;
            style UserMgmt fill:#f9f9ff,stroke:#333,stroke-width:3px
        </div>
    </div>

    <div class="diagram-container">
        <h2>3. Learning System Use Case</h2>
        <p class="description">Learning interactions including viewing modules, quizzes, progress tracking, and
            certificates.</p>
        <button class="download-btn" onclick="downloadDiagram('usecase-learning', 'UseCase-LearningSystem')">Download
            PNG</button>
        <div class="mermaid" id="usecase-learning">
            flowchart TB
            %% Actors
            Student((Student))
            Instructor((Instructor))
            Admin((Administrator))

            %% System Boundary
            subgraph LearningSys["Learning System"]
            direction TB
            AccessLearning([Access Learning System])
            ViewModules([View Learning Modules])
            TakeQuiz([Take Quiz])
            TrackProgress([Track Progress])
            ViewSlides([View Content Slides])
            DownloadMaterials([Download Materials])
            EarnCertificate([Earn Certificate])
            ViewRecommendations([View Recommendations])
            BookmarkContent([Bookmark Content])

            CreateContent([Create Learning Content])
            ManageQuizzes([Manage Quizzes])
            GradeAssessments([Grade Assessments])
            ManageLearningContent([Manage All Learning Content])

            %% Include
            AccessLearning -.->|include| ViewModules
            AccessLearning -.->|include| TakeQuiz
            AccessLearning -.->|include| TrackProgress
            AccessLearning -.->|include| ViewSlides

            %% Extend
            DownloadMaterials -.->|extend| ViewModules
            EarnCertificate -.->|extend| AccessLearning
            ViewRecommendations -.->|extend| AccessLearning
            BookmarkContent -.->|extend| AccessLearning

            %% Instructor-specific relationships
            CreateContent -.->|include| ManageQuizzes
            CreateContent -.->|include| GradeAssessments

            %% Admin-specific relationships
            ManageLearningContent -.->|include| CreateContent
            ManageLearningContent -.->|include| ManageQuizzes
            end

            %% Actor Relationships
            Student --> AccessLearning
            Student --> BookmarkContent
            Student --> DownloadMaterials

            Instructor --> AccessLearning
            Instructor --> CreateContent
            Instructor --> GradeAssessments

            Admin --> ManageLearningContent
            Admin --> AccessLearning

            classDef base fill:#ffcccc,stroke:#333,stroke-width:2px;
            classDef extend fill:#ccffcc,stroke:#333,stroke-width:2px;
            classDef default fill:#fff,stroke:#333,stroke-width:2px;

            class AccessLearning base;
            class EarnCertificate,ViewRecommendations,BookmarkContent extend;
            style LearningSys fill:#f9f9ff,stroke:#333,stroke-width:3px
        </div>
    </div>

    <div class="diagram-container">
        <h2>4. Project Collaboration Use Case</h2>
        <p class="description">Team management features including tasks, file sharing, code review, and milestones.</p>
        <button class="download-btn"
            onclick="downloadDiagram('usecase-projects', 'UseCase-ProjectCollaboration')">Download PNG</button>
        <div class="mermaid" id="usecase-projects">
            flowchart TB
            %% Actors
            Student((Student))
            Instructor((Instructor))

            %% System Boundary
            subgraph ProjectSys["Project Collaboration System"]
            direction TB
            CollabProject([Collaborate on Projects])
            CreateProject([Create Project])
            ManageTasks([Manage Tasks])
            ShareFiles([Share Files])
            UpdateProgress([Update Project Progress])

            InviteMembers([Invite Team Members])
            ReviewCode([Review Code])
            TrackMilestones([Track Milestones])

            %% Include
            CreateProject -.->|include| InviteMembers
            CollabProject -.->|include| CreateProject
            CollabProject -.->|include| ManageTasks
            CollabProject -.->|include| ShareFiles
            CollabProject -.->|include| UpdateProgress

            %% Extend
            ReviewCode -.->|extend| CollabProject
            TrackMilestones -.->|extend| CollabProject
            end

            %% Actor Relationships
            Student --> CollabProject
            Student --> CreateProject
            Student --> ManageTasks
            Student --> ShareFiles

            Instructor --> CollabProject
            Instructor --> ReviewCode
            Instructor --> TrackMilestones

            classDef base fill:#ffcccc,stroke:#333,stroke-width:2px;
            classDef extend fill:#ccffcc,stroke:#333,stroke-width:2px;
            classDef default fill:#fff,stroke:#333,stroke-width:2px;

            class CollabProject base;
            class ReviewCode,TrackMilestones extend;
            style ProjectSys fill:#f9f9ff,stroke:#333,stroke-width:3px
        </div>
    </div>

    <div class="diagram-container">
        <h2>5. Community Use Case</h2>
        <p class="description">Social learning including posts, comments, study groups, global chat, and peer
            interactions.</p>
        <button class="download-btn" onclick="downloadDiagram('usecase-community', 'UseCase-Community')">Download
            PNG</button>
        <div class="mermaid" id="usecase-community">
            flowchart TB
            %% Actors
            Student((Student))
            Instructor((Instructor))
            Admin((Administrator))

            %% System Boundary
            subgraph CommunitySys["Community System"]
            direction TB
            ParticipateComm([Participate in Community])
            CreatePost([Create Post])
            CommentOnPost([Comment on Posts])
            FollowUsers([Follow Users])
            ShareResources([Share Resources])

            JoinStudyGroup([Join Study Group])
            AccessGlobalChat([Access Global Chat])
            SearchContent([Search Community Content])
            SearchCoder([Search Coder])
            ReportContent([Report Inappropriate Content])
            ReceiveNotifications([Receive Notifications])

            QuestionPost([Ask Question])
            ResourcePost([Share Resource])
            ProjectPost([Share Project Update])

            %% Include
            ParticipateComm -.->|include| CreatePost
            ParticipateComm -.->|include| CommentOnPost
            ParticipateComm -.->|include| FollowUsers
            ParticipateComm -.->|include| ShareResources

            %% Extend
            JoinStudyGroup -.->|extend| ParticipateComm
            AccessGlobalChat -.->|extend| ParticipateComm
            SearchContent -.->|extend| ParticipateComm
            SearchCoder -.->|extend| ParticipateComm
            ReportContent -.->|extend| ParticipateComm
            ReceiveNotifications -.->|extend| ParticipateComm

            %% Generalization: Specialization of CreatePost
            CreatePost --- QuestionPost
            CreatePost --- ResourcePost
            CreatePost --- ProjectPost
            end

            %% Actor Relationships
            Student --> ParticipateComm
            Student --> AccessGlobalChat
            Student --> JoinStudyGroup
            Student --> SearchCoder
            Student --> ReportContent

            Instructor --> ParticipateComm
            Instructor --> AccessGlobalChat
            Instructor --> ShareResources
            Instructor --> SearchCoder

            Admin --> ParticipateComm
            Admin --> ReportContent

            classDef base fill:#ffcccc,stroke:#333,stroke-width:2px;
            classDef extend fill:#ccffcc,stroke:#333,stroke-width:2px;
            classDef default fill:#fff,stroke:#333,stroke-width:2px;

            class ParticipateComm base;
            class JoinStudyGroup,AccessGlobalChat,SearchContent,ReportContent,ReceiveNotifications extend;
            style CommunitySys fill:#f9f9ff,stroke:#333,stroke-width:3px
        </div>
    </div>

    <div class="diagram-container">
        <h2>6. AI Mentor Use Case</h2>
        <p class="description">AI tutoring features including questions, code assistance, history, and model switching
            (GPT-4/Gemini).</p>
        <button class="download-btn" onclick="downloadDiagram('usecase-ai', 'UseCase-AIMentor')">Download PNG</button>
        <div class="mermaid" id="usecase-ai">
            flowchart TB
            %% Actors
            Student((Student))
            Instructor((Instructor))

            %% System Boundary
            subgraph AISys["AI Mentor System"]
            direction TB
            InteractAI([Interact with AI Mentor])
            AskQuestion([Ask Question])
            GetCodeHelp([Get Code Assistance])
            RequestExplanation([Request Explanation])
            ViewHistory([View Chat History])

            SwitchAIModel([Switch AI Model])
            SaveConversation([Save Conversation])
            ShareWithInstructor([Share Chat with Instructor])
            GetRecommendations([Get Learning Recommendations])

            %% Include
            InteractAI -.->|include| AskQuestion
            InteractAI -.->|include| GetCodeHelp
            InteractAI -.->|include| RequestExplanation
            InteractAI -.->|include| ViewHistory

            %% Extend
            SwitchAIModel -.->|extend| InteractAI
            SaveConversation -.->|extend| InteractAI
            ShareWithInstructor -.->|extend| InteractAI
            GetRecommendations -.->|extend| InteractAI
            end

            %% Actor Relationships
            Student --> InteractAI
            Student --> SwitchAIModel
            Student --> SaveConversation
            Student --> ShareWithInstructor

            Instructor --> InteractAI
            Instructor --> ViewHistory

            classDef base fill:#ffcccc,stroke:#333,stroke-width:2px;
            classDef extend fill:#ccffcc,stroke:#333,stroke-width:2px;
            classDef default fill:#fff,stroke:#333,stroke-width:2px;

            class InteractAI base;
            class SwitchAIModel,SaveConversation,ShareWithInstructor,GetRecommendations extend;
            style AISys fill:#f9f9ff,stroke:#333,stroke-width:3px
        </div>
    </div>

    <div class="diagram-container">
        <h2>7. User Management Class Diagram</h2>
        <p class="description">User account structure showing User and UserProfile with authentication and profile
            management.</p>
        <button class="download-btn" onclick="downloadDiagram('class-user', 'Class-UserManagement')">Download
            PNG</button>
        <div class="mermaid" id="class-user">
            classDiagram
            class User {
            +UUID id
            +String firebase_uid
            +String email
            +String username
            +String first_name
            +String last_name
            +String role
            +String program
            +String year_level
            +ImageField profile_picture
            +Text bio
            +JSON skills
            +JSON career_interests
            +Integer followers_count
            +Integer following_count
            +Boolean is_active
            +DateTime created_at
            +DateTime updated_at
            +login()
            +logout()
            +resetPassword()
            +updateProfile()
            }

            class UserProfile {
            +UUID id
            +String github_username
            +String linkedin_url
            +String website_url
            +String location
            +Integer total_courses_completed
            +Integer total_modules_completed
            +Integer total_projects
            +Integer total_posts
            +Integer total_likes_received
            +Integer total_comments
            +Integer contribution_points
            +Integer current_streak
            +Integer longest_streak
            +Integer certificates_earned
            +String theme_preference
            +DateTime created_at
            +DateTime updated_at
            +updateStatistics()
            +incrementStreak()
            }

            User "1" -- "1" UserProfile : has

            note for User "Roles: admin, instructor, student\nPrograms: BSIT, BSCS, BSIS"
            note for UserProfile "Tracks learning progress\nand community contributions"
        </div>
    </div>

    <div class="diagram-container">
        <h2>8. Learning System Class Diagram</h2>
        <p class="description">Educational content structure showing career paths, modules, quizzes, and progress
            tracking.</p>
        <button class="download-btn" onclick="downloadDiagram('class-learning', 'Class-LearningSystem')">Download
            PNG</button>
        <div class="mermaid" id="class-learning">
            classDiagram
            class CareerPath {
            +UUID id
            +String name
            +String slug
            +Text description
            +String program_type
            +String difficulty_level
            +Integer estimated_duration
            +Integer total_modules
            +Integer max_modules
            +Integer points_reward
            +JSON required_skills
            +FileField certificate_template
            +Boolean is_active
            +Boolean is_featured
            +addModule()
            +removeModule()
            }

            class LearningModule {
            +UUID id
            +String title
            +Text description
            +String module_type
            +String difficulty_level
            +Text content
            +FileField file
            +Integer duration_minutes
            +Integer points_reward
            +Integer order
            +Boolean is_locked
            +updateContent()
            +addQuiz()
            }

            class Quiz {
            +UUID id
            +String title
            +Text description
            +Text content
            +Integer time_limit_minutes
            +Integer passing_score
            +Integer max_attempts
            +Boolean randomize_questions
            +addQuestion()
            +calculateScore()
            }

            class Question {
            +UUID id
            +Text question_text
            +String question_type
            +JSON correct_answer
            +Integer points
            +Integer order
            +Text explanation
            +validate()
            }

            class QuestionChoice {
            +UUID id
            +String choice_text
            +Boolean is_correct
            +Integer order
            }

            class Enrollment {
            +UUID id
            +String status
            +Integer progress_percentage
            +DateTime enrolled_at
            +DateTime completed_at
            +updateProgress()
            }

            class ModuleProgress {
            +UUID id
            +String status
            +DateTime started_at
            +DateTime completed_at
            +Integer time_spent_minutes
            +updateStatus()
            }

            class QuizAttempt {
            +UUID id
            +Decimal score
            +Integer time_taken_seconds
            +String status
            +DateTime started_at
            +DateTime submitted_at
            +calculateScore()
            }

            class Certificate {
            +UUID id
            +String certificate_id
            +DateTime issued_at
            +String pdf_url
            +generate()
            }

            CareerPath "1" *-- "many" LearningModule : contains
            LearningModule "1" *-- "many" Quiz : includes
            Quiz "1" *-- "many" Question : contains
            Question "1" *-- "many" QuestionChoice : has

            User "many" -- "many" CareerPath : enrolls
            Enrollment "many" -- "1" User
            Enrollment "many" -- "1" CareerPath

            ModuleProgress "many" -- "1" User
            ModuleProgress "many" -- "1" LearningModule
            ModuleProgress "many" -- "1" Enrollment

            QuizAttempt "many" -- "1" User
            QuizAttempt "many" -- "1" Quiz

            Certificate "many" -- "1" User
            Certificate "many" -- "1" CareerPath
        </div>
    </div>

    <div class="diagram-container">
        <h2>9. Project Collaboration Class Diagram</h2>
        <p class="description">Team and project management structure with tasks, files, and code review capabilities.
        </p>
        <button class="download-btn" onclick="downloadDiagram('class-projects', 'Class-ProjectCollaboration')">Download
            PNG</button>
        <div class="mermaid" id="class-projects">
            classDiagram
            class Team {
            +UUID id
            +String name
            +String slug
            +Text description
            +ImageField avatar
            +Boolean is_active
            +DateTime created_at
            +addMember()
            +removeMember()
            }

            class TeamMembership {
            +UUID id
            +String role
            +String status
            +Text message
            +DateTime invited_at
            +DateTime responded_at
            +acceptInvitation()
            +declineInvitation()
            }

            class Project {
            +UUID id
            +String name
            +String slug
            +Text description
            +String status
            +String visibility
            +String tech_stack
            +Date start_date
            +Date end_date
            +Integer progress_percentage
            +DateTime created_at
            +addMember()
            +createTask()
            +updateProgress()
            }

            class ProjectMembership {
            +UUID id
            +String role
            +DateTime joined_at
            +Boolean is_active
            +updateRole()
            }

            class ProjectTask {
            +UUID id
            +String title
            +Text description
            +String status
            +String priority
            +Date start_date
            +Date due_date
            +Integer order
            +DateTime completed_at
            +updateStatus()
            +assignTo()
            }

            class ProjectFile {
            +UUID id
            +String filename
            +FileField file
            +String file_type
            +Integer file_size
            +Integer version
            +DateTime uploaded_at
            +upload()
            }

            class CodeReview {
            +UUID id
            +String title
            +Text description
            +String status
            +DateTime submitted_at
            +DateTime reviewed_at
            +addComment()
            +approve()
            +requestChanges()
            }

            class ReviewComment {
            +UUID id
            +Text comment
            +Integer line_number
            +DateTime created_at
            +addReply()
            }

            Team "1" *-- "many" TeamMembership : has
            TeamMembership "many" -- "1" User

            Project "1" *-- "many" ProjectMembership : has
            ProjectMembership "many" -- "1" User
            Project "many" -- "1" Team : belongs_to

            Project "1" *-- "many" ProjectTask : contains
            ProjectTask "many" -- "1" User : assigned_to
            ProjectTask "many" -- "1" User : created_by

            Project "1" *-- "many" ProjectFile : stores
            ProjectFile "many" -- "1" User : uploaded_by

            Project "1" *-- "many" CodeReview : receives
            CodeReview "1" *-- "many" ReviewComment : has
            CodeReview "many" -- "1" User : submitted_by
        </div>
    </div>

    <div class="diagram-container">
        <h2>10. Community Class Diagram</h2>
        <p class="description">Social features including posts, comments, following, organizations, and chat rooms.</p>
        <button class="download-btn" onclick="downloadDiagram('class-community', 'Class-Community')">Download
            PNG</button>
        <div class="mermaid" id="class-community">
            classDiagram
            class Post {
            +UUID id
            +String title
            +Text content
            +JSON code_snippet
            +ImageField image
            +String post_type
            +Boolean is_pinned
            +Integer like_count
            +Integer comment_count
            +Integer view_count
            +DateTime created_at
            +addComment()
            +toggleLike()
            +pin()
            }

            class Comment {
            +UUID id
            +Text content
            +Integer like_count
            +Boolean is_edited
            +DateTime created_at
            +addReply()
            +edit()
            }

            class PostLike {
            +UUID id
            +DateTime created_at
            }

            class CommentLike {
            +UUID id
            +DateTime created_at
            }

            class UserFollow {
            +UUID id
            +String status
            +DateTime created_at
            +accept()
            +reject()
            }

            class Organization {
            +UUID id
            +String name
            +String slug
            +Text description
            +ImageField cover_image
            +String icon
            +String org_type
            +String program
            +Boolean is_official
            +Boolean is_private
            +Integer member_count
            +Integer post_count
            +addMember()
            +createPost()
            }

            class OrganizationMembership {
            +UUID id
            +String role
            +String status
            +DateTime joined_at
            +updateRole()
            }

            class ChatRoom {
            +UUID id
            +String name
            +String room_type
            +String program
            +Text description
            +Integer member_count
            +Boolean is_active
            +sendMessage()
            }

            class ChatMessage {
            +UUID id
            +Text content
            +JSON attachments
            +Boolean is_edited
            +DateTime created_at
            +edit()
            +delete()
            }

            Post "many" -- "1" User : creates
            Post "1" *-- "many" Comment : has
            Comment "many" -- "1" User : creates
            Comment "many" -- "1" Comment : replies_to

            Post "1" *-- "many" PostLike : has
            PostLike "many" -- "1" User

            Comment "1" *-- "many" CommentLike : has
            CommentLike "many" -- "1" User

            UserFollow "many" -- "1" User : follower
            UserFollow "many" -- "1" User : following

            Organization "1" *-- "many" OrganizationMembership : has
            OrganizationMembership "many" -- "1" User
            Organization "1" *-- "many" Post : contains

            ChatRoom "1" *-- "many" ChatMessage : contains
            ChatMessage "many" -- "1" User : sends
        </div>
    </div>

    <div class="diagram-container">
        <h2>11. AI Mentor Class Diagram</h2>
        <p class="description">AI-powered tutoring system with sessions, messages, code analysis, and recommendations.
        </p>
        <button class="download-btn" onclick="downloadDiagram('class-ai', 'Class-AIMentor')">Download PNG</button>
        <div class="mermaid" id="class-ai">
            classDiagram
            class AIMentorProfile {
            +UUID id
            +String preferred_ai_model
            +Integer total_interactions
            +Integer code_analyses_count
            +Integer recommendations_followed
            +Integer total_tokens_used
            +JSON interaction_history
            +switchModel()
            +updateStats()
            }

            class ProjectMentorSession {
            +UUID id
            +String session_type
            +String status
            +DateTime started_at
            +DateTime ended_at
            +sendMessage()
            +endSession()
            }

            class AIMessage {
            +UUID id
            +String sender
            +Text message
            +JSON metadata
            +Integer tokens_used
            +DateTime created_at
            +generateResponse()
            }

            class CodeAnalysis {
            +UUID id
            +Text code_snippet
            +String language
            +String analysis_type
            +JSON analysis_result
            +JSON suggestions
            +Integer complexity_score
            +DateTime analyzed_at
            +analyze()
            }

            class LearningRecommendation {
            +UUID id
            +String recommendation_type
            +Text reason
            +Integer priority
            +Boolean is_completed
            +DateTime created_at
            +DateTime completed_at
            +markComplete()
            }

            class ProjectGuidance {
            +UUID id
            +String guidance_type
            +Text question
            +Text guidance
            +JSON resources
            +DateTime created_at
            +provideGuidance()
            }

            class AIFeedback {
            +UUID id
            +Integer rating
            +Text feedback
            +Boolean is_helpful
            +DateTime created_at
            +submitFeedback()
            }

            User "1" -- "1" AIMentorProfile : has

            ProjectMentorSession "many" -- "1" User : creates
            ProjectMentorSession "many" -- "1" Project : relates_to
            ProjectMentorSession "1" *-- "many" AIMessage : contains

            CodeAnalysis "many" -- "1" User : requests
            CodeAnalysis "many" -- "1" ProjectMentorSession : belongs_to

            LearningRecommendation "many" -- "1" User : receives
            LearningRecommendation "many" -- "1" LearningModule : suggests
            LearningRecommendation "many" -- "1" CareerPath : suggests

            ProjectGuidance "many" -- "1" User : requests
            ProjectGuidance "many" -- "1" Project : guides

            AIFeedback "many" -- "1" User : submits
            AIFeedback "many" -- "1" ProjectMentorSession : rates
            AIFeedback "many" -- "1" AIMessage : rates
        </div>
    </div>

    <div class="diagram-container">
        <h2>3. Entity-Relationship Diagram</h2>
        <p class="description">Database schema showing entities, primary keys, foreign keys, and relationship
            cardinalities.</p>
        <button class="download-btn" onclick="downloadDiagram('erd-diagram', 'ERD-Database')">Download PNG</button>
        <div class="mermaid" id="erd-diagram">
            erDiagram
            USER ||--o{ ENROLLMENT : "enrolls in"
            USER ||--o{ POST : "creates"
            USER ||--o{ PROJECT_MEMBER : "participates"
            USER ||--o{ QUIZ_ATTEMPT : "takes"
            USER ||--o{ AI_SESSION : "has"

            CAREER_PATH ||--o{ ENROLLMENT : "has"
            CAREER_PATH ||--|{ LEARNING_MODULE : "contains"

            LEARNING_MODULE ||--o{ QUIZ : "includes"
            LEARNING_MODULE ||--o{ MODULE_PROGRESS : "tracks"

            QUIZ ||--|{ QUESTION : "contains"
            QUIZ ||--o{ QUIZ_ATTEMPT : "receives"

            QUESTION ||--o{ QUESTION_CHOICE : "has"
            QUESTION ||--o{ ANSWER : "receives"

            QUIZ_ATTEMPT ||--|{ ANSWER : "includes"

            PROJECT ||--o{ PROJECT_MEMBER : "has"
            PROJECT ||--o{ PROJECT_TASK : "contains"
            PROJECT ||--o{ PROJECT_FILE : "stores"

            POST ||--o{ COMMENT : "receives"
            POST ||--o{ LIKE : "has"

            USER {
            uuid id PK
            string email UK
            string username
            string password_hash
            string role
            datetime created_at
            }

            CAREER_PATH {
            uuid id PK
            string name
            string program_type
            string difficulty_level
            integer total_modules
            datetime created_at
            }

            LEARNING_MODULE {
            uuid id PK
            uuid career_path_id FK
            string title
            text content
            string module_type
            integer order
            }

            QUIZ {
            uuid id PK
            uuid learning_module_id FK
            string title
            integer time_limit
            integer passing_score
            }

            QUESTION {
            uuid id PK
            uuid quiz_id FK
            text question_text
            string question_type
            json correct_answer
            integer points
            }

            ENROLLMENT {
            uuid id PK
            uuid user_id FK
            uuid career_path_id FK
            string status
            integer progress_percentage
            datetime enrolled_at
            }

            PROJECT {
            uuid id PK
            string name
            text description
            datetime deadline
            datetime created_at
            }

            POST {
            uuid id PK
            uuid user_id FK
            text content
            integer like_count
            datetime created_at
            }
        </div>
    </div>

    <div class="diagram-container">
        <h2>14. Activity Diagram - Learning System (Swimlanes)</h2>
        <p class="description">Complete learning workflow with swimlanes showing Student, System, and AI Mentor interactions.</p>
        <button class="download-btn" onclick="downloadDiagram('activity-learning', 'Activity-LearningSystem')">Download PNG</button>
        <div class="mermaid" id="activity-learning">
flowchart TD
    subgraph Student["ðŸ‘¤ Student"]
        S1([Start Learning])
        S2[Browse Career Paths]
        S3[Select Career Path]
        S4[Click Enroll]
        S5[View Module List]
        S6[Select Module]
        S7[Read Content]
        S8[Download Materials]
        S9[Ask AI Question]
        S10[Take Quiz]
        S11[Submit Answers]
        S12[View Certificate]
        S13([End])
    end

    subgraph System["âš™ï¸ Learning System"]
        SY1{Already Enrolled?}
        SY2[Create Enrollment]
        SY3[Load Modules]
        SY4{Prerequisites Met?}
        SY5[Display Module]
        SY6[Track Progress]
        SY7[Load Quiz]
        SY8[Grade Quiz]
        SY9{Score >= Passing?}
        SY10{All Modules Complete?}
        SY11[Generate Certificate]
    end

    subgraph AI["ðŸ¤– AI Mentor"]
        AI1[Process Question]
        AI2[Generate Response]
        AI3[Save Conversation]
    end

    S1 --> S2
    S2 --> S3
    S3 --> S4
    S4 --> SY1
    
    SY1 -->|No| SY2
    SY1 -->|Yes| SY3
    SY2 --> SY3
    
    SY3 --> S5
    S5 --> S6
    S6 --> SY4
    
    SY4 -->|No| S5
    SY4 -->|Yes| SY5
    
    SY5 --> S7
    S7 --> S8
    S8 --> SY6
    SY6 --> S9
    
    S9 --> AI1
    AI1 --> AI2
    AI2 --> AI3
    AI3 --> S7
    
    SY6 --> S10
    S10 --> SY7
    SY7 --> S11
    S11 --> SY8
    SY8 --> SY9
    
    SY9 -->|No| S10
    SY9 -->|Yes| SY10
    
    SY10 -->|No| S5
    SY10 -->|Yes| SY11
    SY11 --> S12
    S12 --> S13

    style S1 fill:#90EE90
    style S13 fill:#FFB6C1
    style AI1 fill:#87CEEB
    style AI2 fill:#87CEEB
    style SY11 fill:#FFD700
        </div>
    </div>

    <div class="diagram-container">
        <h2>15. Activity Diagram - Project Collaboration (Swimlanes)</h2>
        <p class="description">Project workflow with swimlanes showing Student, Team, Instructor, and System interactions.</p>
        <button class="download-btn" onclick="downloadDiagram('activity-project', 'Activity-ProjectCollaboration')">Download PNG</button>
        <div class="mermaid" id="activity-project">
flowchart TD
    subgraph Student["ðŸ‘¤ Student"]
        ST1([Start Project])
        ST2[Create Project]
        ST3[Invite Team Members]
        ST4[Create Task]
        ST5[Work on Task]
        ST6[Upload Files]
        ST7[Submit for Review]
        ST8[Make Changes]
        ST9([Complete])
    end

    subgraph Team["ðŸ‘¥ Team Members"]
        T1{Accept Invitation?}
        T2[Join Project]
        T3[View Tasks]
        T4[Update Task Status]
        T5[Collaborate on Files]
    end

    subgraph Instructor["ðŸ‘¨â€ðŸ« Instructor"]
        I1[Review Code]
        I2{Approved?}
        I3[Provide Feedback]
        I4[Approve Submission]
        I5[Track Milestones]
    end

    subgraph System["âš™ï¸ System"]
        SY1[Create Project Record]
        SY2[Send Invitations]
        SY3[Create Task Record]
        SY4[Store Files]
        SY5[Create Review Record]
        SY6[Update Progress]
        SY7[Mark Complete]
    end

    ST1 --> ST2
    ST2 --> SY1
    SY1 --> ST3
    ST3 --> SY2
    SY2 --> T1
    
    T1 -->|Yes| T2
    T1 -->|No| SY2
    T2 --> T3
    
    ST3 --> ST4
    ST4 --> SY3
    SY3 --> ST5
    ST5 --> T4
    T4 --> ST6
    
    ST6 --> SY4
    SY4 --> T5
    T5 --> ST7
    ST7 --> SY5
    SY5 --> I1
    
    I1 --> I2
    I2 -->|No| I3
    I3 --> ST8
    ST8 --> ST5
    
    I2 -->|Yes| I4
    I4 --> SY6
    SY6 --> I5
    I5 --> SY7
    SY7 --> ST9

    style ST1 fill:#90EE90
    style ST9 fill:#FFB6C1
    style I4 fill:#FFD700
        </div>
    </div>

    <div class="diagram-container">
        <h2>16. Activity Diagram - Community Interaction (Swimlanes)</h2>
        <p class="description">Community workflow with swimlanes showing User, Community, and System interactions.</p>
        <button class="download-btn" onclick="downloadDiagram('activity-community', 'Activity-Community')">Download PNG</button>
        <div class="mermaid" id="activity-community">
flowchart TD
    subgraph User["ðŸ‘¤ User"]
        U1([Start])
        U2[Browse Posts]
        U3[Create Post]
        U4[Add Comment]
        U5[Like Post]
        U6[Search Coder]
        U7[Follow User]
        U8[Join Chat Room]
        U9[Send Message]
        U10([Continue])
    end

    subgraph Community["ðŸ’¬ Community"]
        C1[Display Feed]
        C2{Post Type?}
        C3[Question Post]
        C4[Resource Post]
        C5[Project Update]
        C6[Show Comments]
        C7[Display Search Results]
        C8{Follow Status?}
        C9[Send Request]
        C10[Add Follower]
        C11[Display Messages]
    end

    subgraph System["âš™ï¸ System"]
        SY1[Load Posts]
        SY2[Create Post Record]
        SY3[Save Comment]
        SY4[Update Like Count]
        SY5[Search Users DB]
        SY6[Create Follow Record]
        SY7[Send Notification]
        SY8[Store Message]
        SY9[Broadcast via WebSocket]
    end

    U1 --> U2
    U2 --> SY1
    SY1 --> C1
    C1 --> U3
    
    U3 --> SY2
    SY2 --> C2
    C2 -->|Question| C3
    C2 -->|Resource| C4
    C2 -->|Project| C5
    
    C3 --> U4
    C4 --> U4
    C5 --> U4
    
    U4 --> SY3
    SY3 --> C6
    C6 --> U5
    
    U5 --> SY4
    SY4 --> SY7
    SY7 --> U6
    
    U6 --> SY5
    SY5 --> C7
    C7 --> U7
    
    U7 --> C8
    C8 -->|Pending| C9
    C8 -->|Accepted| C10
    C9 --> SY6
    C10 --> SY6
    SY6 --> U8
    
    U8 --> C11
    C11 --> U9
    U9 --> SY8
    SY8 --> SY9
    SY9 --> U10

    style U1 fill:#90EE90
    style U10 fill:#87CEEB
    style SY9 fill:#FFD700
        </div>
    </div>

    <div class="diagram-container">
        <h2>17. Activity Diagram - AI Mentor Session (Swimlanes)</h2>
        <p class="description">AI tutoring workflow with swimlanes showing Student, AI Mentor, and System interactions.</p>
        <button class="download-btn" onclick="downloadDiagram('activity-ai', 'Activity-AIMentor')">Download PNG</button>
        <div class="mermaid" id="activity-ai">
flowchart TD
    subgraph Student["ðŸ‘¤ Student"]
        S1([Start AI Session])
        S2[Open AI Chat]
        S3[Type Question]
        S4[Send Question]
        S5{Switch Model?}
        S6[Select GPT-4/Gemini]
        S7[Review Response]
        S8{Helpful?}
        S9[Submit Feedback]
        S10{Continue?}
        S11[Save Conversation]
        S12([End Session])
    end

    subgraph AI["ðŸ¤– AI Mentor Service"]
        AI1[Receive Question]
        AI2[Load Context]
        AI3[Load History]
        AI4{Model Type?}
        AI5[Call GPT-4 API]
        AI6[Call Gemini API]
        AI7[Process Response]
        AI8[Generate Answer]
        AI9[Analyze Code]
        AI10[Suggest Resources]
    end

    subgraph System["âš™ï¸ System"]
        SY1[Create Session]
        SY2[Load Profile]
        SY3{Model Preference}
        SY4[Save Message]
        SY5[Store Response]
        SY6[Update Stats]
        SY7[Cache Response]
        SY8[Save Feedback]
        SY9[End Session Record]
    end

    S1 --> S2
    S2 --> SY1
    SY1 --> SY2
    SY2 --> S3
    
    S3 --> S4
    S4 --> S5
    
    S5 -->|Yes| S6
    S5 -->|No| SY3
    S6 --> SY3
    
    SY3 --> AI1
    AI1 --> AI2
    AI2 --> AI3
    AI3 --> AI4
    
    AI4 -->|GPT-4| AI5
    AI4 -->|Gemini| AI6
    
    AI5 --> AI7
    AI6 --> AI7
    AI7 --> AI8
    AI8 --> AI9
    AI9 --> AI10
    AI10 --> SY4
    
    SY4 --> SY5
    SY5 --> SY6
    SY6 --> SY7
    SY7 --> S7
    
    S7 --> S8
    S8 -->|Yes| S10
    S8 -->|No| S9
    S9 --> SY8
    SY8 --> S10
    
    S10 -->|Yes| S3
    S10 -->|No| S11
    S11 --> SY9
    SY9 --> S12

    style S1 fill:#90EE90
    style S12 fill:#FFB6C1
    style AI5 fill:#87CEEB
    style AI6 fill:#87CEEB
    style SY7 fill:#FFD700
        </div>
    </div>

    <div class="diagram-container">
        <h2>18. Activity Diagram - User Authentication (Swimlanes)</h2>
        <p class="description">Authentication workflow with swimlanes showing User, System, and Firebase interactions.</p>
        <button class="download-btn" onclick="downloadDiagram('activity-auth', 'Activity-Authentication')">Download PNG</button>
        <div class="mermaid" id="activity-auth">
flowchart TD
    subgraph User["ðŸ‘¤ User"]
        U1([Open App])
        U2{Has Account?}
        U3[Click Login]
        U4[Click Register]
        U5[Enter Credentials]
        U6[Choose Google OAuth]
        U7[Access Dashboard]
        U8([Continue])
    end

    subgraph System["âš™ï¸ Backend System"]
        SY1[Load Login Page]
        SY2{Auth Method?}
        SY3[Validate Credentials]
        SY4[Check Database]
        SY5{Valid?}
        SY6[Generate JWT Token]
        SY7[Create Session]
        SY8[Return Error]
        SY9[Create User Record]
        SY10[Assign Role]
        SY11[Send Welcome Email]
    end

    subgraph Firebase["ðŸ” Firebase Auth"]
        F1[Google OAuth Flow]
        F2[Verify Google Account]
        F3{First Time?}
        F4[Return User Data]
    end

    U1 --> U2
    U2 -->|Yes| U3
    U2 -->|No| U4
    
    U3 --> SY1
    SY1 --> U5
    
    U4 --> SY1
    U5 --> SY2
    
    SY2 -->|Email/Password| SY3
    SY2 -->|Google OAuth| U6
    
    U6 --> F1
    F1 --> F2
    F2 --> F3
    
    F3 -->|Yes| SY9
    F3 -->|No| F4
    
    SY9 --> SY10
    SY10 --> SY11
    SY11 --> SY6
    
    F4 --> SY4
    
    SY3 --> SY4
    SY4 --> SY5
    
    SY5 -->|Yes| SY6
    SY5 -->|No| SY8
    
    SY8 --> U5
    
    SY6 --> SY7
    SY7 --> U7
    U7 --> U8

    style U1 fill:#90EE90
    style U8 fill:#FFB6C1
    style SY6 fill:#FFD700
    style F2 fill:#87CEEB
        </div>
    </div>

    <div class="diagram-container">
        <h2>10. Sequence Diagram - AI Mentor Interaction</h2>
        <p class="description">Temporal message flow showing how students interact with the AI mentor system.</p>
        <button class="download-btn" onclick="downloadDiagram('sequence-ai', 'Sequence-AI-Mentor')">Download
            PNG</button>
        <div class="mermaid" id="sequence-ai">
            sequenceDiagram
            actor Student
            participant UI as Frontend UI
            participant API as Backend API
            participant Auth as Auth Service
            participant AI as AI Service
            participant DB as Database
            participant Cache as Redis Cache

            Student->>UI: Click "Ask AI Mentor"
            UI->>UI: Open Chat Interface
            Student->>UI: Type Question
            UI->>API: POST /api/ai-mentor/chat

            API->>Auth: Validate JWT Token
            Auth-->>API: Token Valid

            API->>DB: Retrieve Conversation History
            DB-->>API: Previous Messages

            API->>Cache: Check Cached Response
            Cache-->>API: No Cache Found

            API->>DB: Get User Learning Context
            DB-->>API: Current Module, Progress

            API->>AI: Send Request with Context
            Note over API,AI: Includes: question, history,<br />learning context, user profile

            AI->>AI: Process with GPT-4/Gemini
            AI-->>API: AI Response Generated

            API->>DB: Save Message & Response
            DB-->>API: Saved Successfully

            API->>Cache: Cache Response (5 min TTL)
            Cache-->>API: Cached

            API-->>UI: Return Response JSON
            UI->>UI: Render Response
            UI-->>Student: Display AI Answer
        </div>
    </div>

    <div class="diagram-container">
        <h2>19. Sequence Diagram - Learning Module Enrollment</h2>
        <p class="description">Enrollment workflow showing interactions between Student, API, Learning Service, Database, and Certificate Service.</p>
        <button class="download-btn" onclick="downloadDiagram('sequence-learning', 'Sequence-Learning')">Download PNG</button>
        <div class="mermaid" id="sequence-learning">
sequenceDiagram
    actor Student
    participant UI as Frontend UI
    participant API as API Gateway
    participant Auth as Auth Service
    participant Learn as Learning Service
    participant DB as Database
    participant Cert as Certificate Service
    
    Student->>UI: Browse Career Paths
    UI->>API: GET /api/learning/career-paths/
    API->>Auth: Validate JWT Token
    Auth-->>API: Token Valid
    API->>Learn: Get Career Paths
    Learn->>DB: Query CareerPath
    DB-->>Learn: Return Career Paths
    Learn-->>API: Career Path List
    API-->>UI: Display Paths
    
    Student->>UI: Click Enroll
    UI->>API: POST /api/learning/enroll/
    API->>Auth: Validate Token
    Auth-->>API: Authorized
    API->>Learn: Create Enrollment
    Learn->>DB: Check Existing Enrollment
    
    alt Already Enrolled
        DB-->>Learn: Enrollment Exists
        Learn-->>API: Error: Already Enrolled
        API-->>UI: Show Error
    else New Enrollment
        DB-->>Learn: No Enrollment
        Learn->>DB: Create Enrollment Record
        Learn->>DB: Load Modules
        DB-->>Learn: Module List
        Learn-->>API: Enrollment Success
        API-->>UI: Show Module List
    end
    
    Student->>UI: Select Module
    UI->>API: GET /api/learning/module/:id/
    API->>Learn: Get Module Content
    Learn->>DB: Check Prerequisites
    
    alt Prerequisites Not Met
        DB-->>Learn: Prerequisites Missing
        Learn-->>API: Error: Locked Module
        API-->>UI: Show Locked Message
    else Prerequisites Met
        DB-->>Learn: Prerequisites OK
        Learn->>DB: Get Module Content
        DB-->>Learn: Module Data
        Learn->>DB: Create ModuleProgress
        Learn-->>API: Module Content
        API-->>UI: Display Module
    end
    
    Student->>UI: Complete All Modules
    UI->>API: POST /api/learning/complete/
    API->>Learn: Check Completion
    Learn->>DB: Verify All Modules Complete
    DB-->>Learn: All Complete
    Learn->>Cert: Generate Certificate
    Cert->>DB: Save Certificate Record
    Cert-->>Learn: Certificate ID
    Learn-->>API: Completion Success
    API-->>UI: Show Certificate
        </div>
    </div>

    <div class="diagram-container">
        <h2>20. Sequence Diagram - Project Collaboration</h2>
        <p class="description">Project workflow showing team formation, task management, file sharing, and code review process.</p>
        <button class="download-btn" onclick="downloadDiagram('sequence-project', 'Sequence-Project')">Download PNG</button>
        <div class="mermaid" id="sequence-project">
sequenceDiagram
    actor Student
    actor TeamMember
    actor Instructor
    participant UI as Frontend UI
    participant API as API Gateway
    participant Proj as Project Service
    participant DB as Database
    participant Notif as Notification Service
    participant Storage as File Storage
    
    Student->>UI: Create Project
    UI->>API: POST /api/projects/
    API->>Proj: Create Project
    Proj->>DB: Save Project Record
    Proj->>DB: Add Creator as Owner
    DB-->>Proj: Project Created
    Proj-->>API: Project ID
    API-->>UI: Project Dashboard
    
    Student->>UI: Invite Team Member
    UI->>API: POST /api/projects/:id/invite/
    API->>Proj: Create Invitation
    Proj->>DB: Create ProjectMembership (pending)
    DB-->>Proj: Invitation Created
    Proj->>Notif: Send Invitation Email
    Notif-->>TeamMember: Email Notification
    Proj-->>API: Invitation Sent
    API-->>UI: Success Message
    
    TeamMember->>UI: Accept Invitation
    UI->>API: POST /api/projects/membership/:id/accept/
    API->>Proj: Update Membership Status
    Proj->>DB: Set Status = Accepted
    Proj->>Notif: Notify Project Owner
    Notif-->>Student: Team Member Joined
    DB-->>Proj: Updated
    Proj-->>API: Success
    API-->>UI: Show Project Access
    
    Student->>UI: Create Task
    UI->>API: POST /api/projects/:id/tasks/
    API->>Proj: Create Task
    Proj->>DB: Save ProjectTask
    Proj->>Notif: Notify Assigned User
    DB-->>Proj: Task Created
    Proj-->>API: Task ID
    API-->>UI: Task List Updated
    
    TeamMember->>UI: Upload File
    UI->>API: POST /api/projects/:id/files/
    API->>Storage: Store File
    Storage-->>API: File URL
    API->>Proj: Save File Metadata
    Proj->>DB: Create ProjectFile Record
    Proj->>Notif: Notify Team
    DB-->>Proj: Saved
    Proj-->>API: File Info
    API-->>UI: File Uploaded
    
    Student->>UI: Submit for Review
    UI->>API: POST /api/projects/:id/reviews/
    API->>Proj: Create Code Review
    Proj->>DB: Save CodeReview Record
    Proj->>Notif: Notify Instructor
    Notif-->>Instructor: Review Request
    DB-->>Proj: Review Created
    Proj-->>API: Review ID
    API-->>UI: Awaiting Review
    
    Instructor->>UI: Review Code
    UI->>API: GET /api/projects/reviews/:id/
    API->>Proj: Get Review Details
    Proj->>DB: Load Code Review
    DB-->>Proj: Review Data
    Proj-->>API: Review Content
    API-->>UI: Display Code
    
    Instructor->>UI: Approve/Request Changes
    UI->>API: PATCH /api/projects/reviews/:id/
    API->>Proj: Update Review Status
    Proj->>DB: Save Review Decision
    Proj->>Notif: Notify Student
    Notif-->>Student: Review Complete
    DB-->>Proj: Updated
    Proj-->>API: Success
    API-->>UI: Review Status Updated
        </div>
    </div>

    <div class="diagram-container">
        <h2>21. Sequence Diagram - Community Post Creation</h2>
        <p class="description">Community interaction showing post creation, commenting, liking, and real-time WebSocket updates.</p>
        <button class="download-btn" onclick="downloadDiagram('sequence-community', 'Sequence-Community')">Download PNG</button>
        <div class="mermaid" id="sequence-community">
sequenceDiagram
    actor User
    actor Follower
    participant UI as Frontend UI
    participant API as API Gateway
    participant Comm as Community Service
    participant DB as Database
    participant WS as WebSocket Server
    participant Cache as Redis Cache
    participant Notif as Notification Service
    
    User->>UI: Create Post
    UI->>API: POST /api/community/posts/
    API->>Comm: Create Post
    Comm->>DB: Validate User
    DB-->>Comm: User Valid
    
    Comm->>DB: Save Post Record
    DB-->>Comm: Post ID
    
    Comm->>Cache: Invalidate Feed Cache
    Cache-->>Comm: Cache Cleared
    
    Comm->>DB: Get User Followers
    DB-->>Comm: Follower List
    
    par Broadcast to Followers
        Comm->>WS: Broadcast New Post
        WS-->>Follower: Real-time Update
    and Send Notifications
        Comm->>Notif: Send Notifications
        Notif-->>Follower: Push Notification
    end
    
    Comm-->>API: Post Created
    API-->>UI: Display Post
    
    Follower->>UI: View Feed
    UI->>API: GET /api/community/posts/feed/
    API->>Cache: Check Feed Cache
    
    alt Cache Hit
        Cache-->>API: Cached Feed
        API-->>UI: Display Feed
    else Cache Miss
        Cache-->>API: Cache Miss
        API->>Comm: Get Feed
        Comm->>DB: Query Posts
        DB-->>Comm: Post List
        Comm->>Cache: Store in Cache
        Comm-->>API: Feed Data
        API-->>UI: Display Feed
    end
    
    Follower->>UI: Click Like
    UI->>API: POST /api/community/posts/:id/like/
    API->>Comm: Toggle Like
    Comm->>DB: Check Existing Like
    
    alt Already Liked
        DB-->>Comm: Like Exists
        Comm->>DB: Delete Like
        Comm->>DB: Decrement Like Count
    else Not Liked
        DB-->>Comm: No Like
        Comm->>DB: Create PostLike
        Comm->>DB: Increment Like Count
        Comm->>Notif: Notify Post Author
        Notif-->>User: Like Notification
    end
    
    Comm->>WS: Broadcast Like Count Update
    WS-->>UI: Update UI in Real-time
    Comm-->>API: Success
    API-->>UI: Like Updated
    
    Follower->>UI: Add Comment
    UI->>API: POST /api/community/posts/:id/comments/
    API->>Comm: Create Comment
    Comm->>DB: Save Comment
    Comm->>DB: Increment Comment Count
    DB-->>Comm: Comment Created
    
    par Real-time Updates
        Comm->>WS: Broadcast New Comment
        WS-->>User: Comment Notification
        WS-->>UI: Update Comment Section
    and Notifications
        Comm->>Notif: Notify Post Author
        Notif-->>User: Comment Notification
    end
    
    Comm->>Cache: Invalidate Post Cache
    Comm-->>API: Comment Created
    API-->>UI: Display Comment
        </div>
    </div>

    <div class="diagram-container">
        <h2>22. Sequence Diagram - User Authentication</h2>
        <p class="description">Authentication workflow showing login, registration, Firebase OAuth, and JWT token generation.</p>
        <button class="download-btn" onclick="downloadDiagram('sequence-auth', 'Sequence-Authentication')">Download PNG</button>
        <div class="mermaid" id="sequence-auth">
sequenceDiagram
    actor User
    participant UI as Frontend UI
    participant API as API Gateway
    participant Auth as Auth Service
    participant Firebase as Firebase Auth
    participant DB as Database
    participant Token as JWT Service
    participant Cache as Redis Session
    
    Note over User,Cache: Email/Password Login Flow
    
    User->>UI: Enter Email & Password
    UI->>API: POST /api/auth/login/
    API->>Auth: Validate Credentials
    Auth->>DB: Query User by Email
    
    alt User Not Found
        DB-->>Auth: No User
        Auth-->>API: Error: Invalid Credentials
        API-->>UI: Show Error
    else User Found
        DB-->>Auth: User Data
        Auth->>Auth: Verify Password Hash
        
        alt Invalid Password
            Auth-->>API: Error: Invalid Password
            API-->>UI: Show Error
        else Valid Password
            Auth->>Token: Generate JWT Token
            Token->>Token: Create Access Token (30 min)
            Token->>Token: Create Refresh Token (7 days)
            Token-->>Auth: Tokens Generated
            
            Auth->>Cache: Store Session
            Cache-->>Auth: Session Saved
            
            Auth->>DB: Update Last Login
            DB-->>Auth: Updated
            
            Auth-->>API: Login Success + Tokens
            API-->>UI: Store Tokens
            UI->>UI: Redirect to Dashboard
        end
    end
    
    Note over User,Cache: Google OAuth Flow
    
    User->>UI: Click "Login with Google"
    UI->>Firebase: Initiate OAuth
    Firebase-->>User: Google Login Page
    User->>Firebase: Authorize
    Firebase->>Firebase: Verify Google Account
    Firebase-->>UI: Return ID Token
    
    UI->>API: POST /api/auth/google/
    API->>Auth: Verify Firebase Token
    Auth->>Firebase: Validate Token
    Firebase-->>Auth: Token Valid + User Info
    
    Auth->>DB: Check User Exists (by firebase_uid)
    
    alt First Time User
        DB-->>Auth: User Not Found
        Auth->>DB: Create User Record
        Auth->>DB: Assign Default Role (student)
        Auth->>DB: Create UserProfile
        DB-->>Auth: User Created
        Auth->>Auth: Send Welcome Email
    else Existing User
        DB-->>Auth: User Found
    end
    
    Auth->>Token: Generate JWT Token
    Token-->>Auth: Access + Refresh Tokens
    
    Auth->>Cache: Store Session
    Cache-->>Auth: Session Saved
    
    Auth-->>API: Login Success + Tokens
    API-->>UI: Store Tokens
    UI->>UI: Redirect to Dashboard
    
    Note over User,Cache: Token Refresh Flow
    
    UI->>API: Request with Expired Token
    API->>Auth: Validate Token
    Auth-->>API: Token Expired
    API-->>UI: 401 Unauthorized
    
    UI->>API: POST /api/auth/refresh/
    API->>Auth: Validate Refresh Token
    Auth->>Cache: Check Session
    
    alt Session Valid
        Cache-->>Auth: Session Found
        Auth->>Token: Generate New Access Token
        Token-->>Auth: New Token
        Auth-->>API: New Access Token
        API-->>UI: Token Refreshed
        UI->>UI: Retry Original Request
    else Session Invalid
        Cache-->>Auth: Session Not Found
        Auth-->>API: Invalid Session
        API-->>UI: Redirect to Login
    end
        </div>
    </div>

    <div class="diagram-container">
        <h2>12. System Architecture Diagram</h2>
        <p class="description">Enhanced multi-layered architecture showing frontend (React + Vite), backend (Django +
            DRF), real-time (WebSocket), data persistence (PostgreSQL + Redis), and external AI services (OpenAI +
            Gemini).</p>
        <button class="download-btn" onclick="downloadDiagram('architecture', 'System-Architecture')">Download
            PNG</button>
        <div class="mermaid" id="architecture">
            flowchart TB
            subgraph Client["ðŸŒ Client Layer"]
            direction LR
            Browser["Web Browser<br />(Chrome, Firefox, Safari)"]
            Mobile["Mobile Browser<br />(Responsive Design)"]
            end

            subgraph Frontend["âš›ï¸ Frontend Layer - React 18 + TypeScript + Vite"]
            direction TB
            React["React 18.2<br />Component Library"]
            Router["React Router 6<br />Navigation & Routing"]
            State["Zustand<br />State Management"]
            Query["TanStack Query<br />Server State & Caching"]

            subgraph UI_Components["UI Components"]
            Navbar["Navbar"]
            Dashboard["Dashboard"]
            Learning["Learning Pages"]
            Community["Community Pages"]
            Projects["Project Pages"]
            AIMentor["AI Mentor Chat"]
            end
            end

            subgraph Backend["ðŸ Backend Layer - Django 4.2.7"]
            direction TB

            subgraph API["REST API - Django REST Framework"]
            Auth["JWT Authentication<br />djangorestframework-simplejwt"]
            CORS["CORS Handler<br />django-cors-headers"]
            API_Router["API Router<br />URL Routing"]
            end

            subgraph Django_Apps["Django Applications"]
            Accounts["ðŸ‘¤ Accounts<br />User Management"]
            LearningApp["ðŸ“š Learning<br />Courses & Quizzes"]
            ProjectsApp["ðŸ’¼ Projects<br />Collaboration"]
            CommunityApp["ðŸ’¬ Community<br />Social Features"]
            AIMentorApp["ðŸ¤– AI Mentor<br />Intelligent Tutoring"]
            end

            subgraph RealTime["Real-Time Layer"]
            Channels["Django Channels 4.0<br />WebSocket Support"]
            ChannelsRedis["Channels Redis<br />WebSocket Backend"]
            end

            subgraph AsyncTasks["Asynchronous Task Queue"]
            Celery["Celery 5.3<br />Task Worker"]
            CeleryBeat["Celery Beat<br />Scheduled Tasks"]
            end
            end

            subgraph Data["ðŸ’¾ Data Persistence Layer"]
            direction LR
            PostgreSQL[("PostgreSQL 15<br />Primary Database<br />SQLite for Dev")]
            Redis[("Redis 7<br />Cache, Sessions<br />WebSocket Backend")]
            MediaStorage["Media Storage<br />Profile Pictures<br />Module Files<br />Project Files"]
            end

            subgraph External["â˜ï¸ External Services"]
            direction TB
            OpenAI["OpenAI API<br />GPT-4 Model"]
            Gemini["Google Gemini API<br />gemini-1.5-pro"]
            FirebaseAuth["Firebase Auth<br />Google OAuth"]
            end

            %% Client to Frontend
            Browser --> React
            Mobile --> React

            %% Frontend Internal
            React --> Router
            React --> State
            React --> Query
            React --> UI_Components

            %% Frontend to Backend
            Query -->|"HTTP/HTTPS<br />REST API"| API_Router
            UI_Components -->|"WebSocket<br />wss://"| Channels

            %% API Layer
            API_Router --> Auth
            API_Router --> CORS
            Auth --> Accounts
            Auth --> LearningApp
            Auth --> ProjectsApp
            Auth --> CommunityApp
            Auth --> AIMentorApp

            %% Real-Time
            Channels --> ChannelsRedis
            ChannelsRedis --> Redis
            Channels --> CommunityApp

            %% Async Tasks
            Celery --> Redis
            CeleryBeat --> Redis
            Celery --> LearningApp
            Celery --> AIMentorApp

            %% Database Connections
            Accounts --> PostgreSQL
            LearningApp --> PostgreSQL
            ProjectsApp --> PostgreSQL
            CommunityApp --> PostgreSQL
            AIMentorApp --> PostgreSQL

            %% Cache Connections
            Auth --> Redis
            Query --> Redis

            %% Media Files
            LearningApp --> MediaStorage
            CommunityApp --> MediaStorage
            ProjectsApp --> MediaStorage
            Accounts --> MediaStorage

            %% External Services
            AIMentorApp -->|"API Key"| OpenAI
            AIMentorApp -->|"API Key"| Gemini
            Accounts -->|"OAuth 2.0"| FirebaseAuth

            %% Styling
            style Client fill:#e3f2fd,stroke:#1976d2,stroke-width:3px
            style Frontend fill:#fff9c4,stroke:#f57f17,stroke-width:3px
            style Backend fill:#c8e6c9,stroke:#388e3c,stroke-width:3px
            style Data fill:#f8bbd0,stroke:#c2185b,stroke-width:3px
            style External fill:#e1bee7,stroke:#7b1fa2,stroke-width:3px

            style API fill:#b3e5fc,stroke:#0277bd,stroke-width:2px
            style Django_Apps fill:#a5d6a7,stroke:#2e7d32,stroke-width:2px
            style RealTime fill:#ffccbc,stroke:#d84315,stroke-width:2px
            style AsyncTasks fill:#ffe082,stroke:#f57c00,stroke-width:2px
            style UI_Components fill:#fff59d,stroke:#f9a825,stroke-width:2px
        </div>
    </div>

    <div class="diagram-container">
        <h2>13. Deployment Diagram</h2>
        <p class="description">Enhanced physical deployment architecture showing development (local), staging, and
            production environments with Docker containerization, load balancing, and cloud services.</p>
        <button class="download-btn" onclick="downloadDiagram('deployment', 'Deployment-Diagram')">Download
            PNG</button>
        <div class="mermaid" id="deployment">
            flowchart TB
            subgraph Internet["Internet"]
            Users[Users]
            DNS[DNS Server]
            end

            subgraph Cloud["Cloud Infrastructure"]
            subgraph LB["Load Balancer"]
            Nginx_LB[Nginx Load Balancer SSL Termination]
            end

            subgraph Web_Tier["Web Application Tier"]
            Web1[Web Server 1 Gunicorn Django]
            Web2[Web Server 2 Gunicorn Django]
            end

            subgraph Data_Tier["Data Tier"]
            DB_Master[(PostgreSQL Master)]
            DB_Replica[(PostgreSQL Replica)]
            Redis_Main[(Redis Master)]
            end

            subgraph Storage["File Storage"]
            S3[AWS S3 Object Storage]
            end
            end

            subgraph External_API["External APIs"]
            OpenAI_API[OpenAI API]
            Gemini_API[Google Gemini API]
            Firebase_API[Firebase Auth]
            end

            Users --> DNS
            DNS --> Nginx_LB

            Nginx_LB --> Web1
            Nginx_LB --> Web2

            Web1 --> DB_Master
            Web2 --> DB_Master
            Web1 --> DB_Replica
            Web2 --> DB_Replica

            Web1 --> Redis_Main
            Web2 --> Redis_Main

            Web1 --> S3
            Web2 --> S3

            DB_Master -.replicate.-> DB_Replica

            Web1 --> OpenAI_API
            Web2 --> OpenAI_API
            Web1 --> Gemini_API
            Web2 --> Gemini_API
            Web1 --> Firebase_API
            Web2 --> Firebase_API

            style Internet fill:#e3f2fd
            style Cloud fill:#f1f8e9
            style External_API fill:#fff3e0
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });

        function downloadDiagram(diagramId, filename) {
            const svg = document.querySelector(`#${diagramId} svg`);
            if (!svg) {
                alert('Diagram not rendered yet. Please wait a moment and try again.');
                return;
            }

            // Get SVG dimensions
            const bbox = svg.getBBox();
            const viewBox = svg.viewBox.baseVal;
            const width = viewBox.width || bbox.width || svg.clientWidth;
            const height = viewBox.height || bbox.height || svg.clientHeight;

            // Create a clone and set explicit dimensions
            const clonedSvg = svg.cloneNode(true);
            clonedSvg.setAttribute('width', width);
            clonedSvg.setAttribute('height', height);

            // Create a canvas
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const svgData = new XMLSerializer().serializeToString(clonedSvg);

            const img = new Image();
            const svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
            const url = URL.createObjectURL(svgBlob);

            img.onload = function () {
                const scale = 2; // Higher resolution
                canvas.width = width * scale;
                canvas.height = height * scale;
                ctx.scale(scale, scale);
                ctx.fillStyle = 'white';
                ctx.fillRect(0, 0, width, height);
                ctx.drawImage(img, 0, 0, width, height);

                canvas.toBlob(function (blob) {
                    const link = document.createElement('a');
                    link.download = `${filename}.png`;
                    link.href = URL.createObjectURL(blob);
                    link.click();
                    URL.revokeObjectURL(url);
                });
            };

            img.onerror = function () {
                alert('Failed to generate image. Please try again.');
                URL.revokeObjectURL(url);
            };

            img.src = url;
        }

        // Print instructions
        console.log('%cðŸ“Š CCIS-CodeHub UML Diagrams Loaded!', 'color: #3498db; font-size: 16px; font-weight: bold;');
        console.log('%cClick the "Download PNG" buttons to save individual diagrams.', 'color: #2ecc71; font-size: 14px;');
        console.log('%cOr use Ctrl+P to print all diagrams to PDF.', 'color: #2ecc71; font-size: 14px;');
    </script>
</body>

</html>